# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
<script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
// Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)# FastSpring Integration Guide for Dealverse OS

## 1. Introduction

This guide provides a comprehensive, step-by-step approach to integrating FastSpring as the subscriber payment handler for the 'dealverse os' web application. FastSpring offers a robust platform for managing subscriptions, handling payments, and providing a seamless checkout experience. By following this guide, developers can effectively leverage FastSpring's API and webhooks to manage their subscription-based services.

## 2. Key FastSpring Concepts

Before diving into the integration details, it's essential to understand some core FastSpring concepts:

*   **Products and Subscriptions**: In FastSpring, you define your offerings as products. For recurring payments, these will be subscription products. The FastSpring API allows for the creation and management of these products [1].
*   **Orders**: When a customer makes a purchase, an order is created. This encompasses all details of the transaction.
*   **Accounts**: FastSpring creates an account for each customer, which can be managed via the API [2].
*   **Webhooks and Events**: FastSpring uses webhooks to notify your application of significant events, such as new subscriptions, renewals, cancellations, and payment failures. These events are crucial for keeping your application's subscription status in sync with FastSpring [3].
*   **API Credentials**: To interact with the FastSpring API, you will need to generate API credentials (username and password) within your FastSpring account. These credentials must be securely stored and used for authentication [1].

## 3. Integration Steps

Integrating FastSpring involves several key steps, from setting up your FastSpring account to handling real-time events in your application.

### 3.1. FastSpring Account Setup

1.  **Create a FastSpring Account**: If you don't already have one, sign up for a FastSpring account.
2.  **Configure Store Settings**: Set up your store details, including currency, taxes, and branding.
3.  **Generate API Credentials**: Navigate to `Developer Tools > APIs > API Credentials` in your FastSpring App. Click 'Create' to generate your API username and password. **Securely store these credentials**, as they will not be viewable again after the initial session [1].

### 3.2. Product and Subscription Setup in FastSpring

Define your subscription products within the FastSpring platform. This includes:

1.  **Product Creation**: Create your subscription products, defining pricing, billing cycles (e.g., monthly, annually), and any trial periods.
2.  **Product Offers**: If you have different tiers or variations of your subscription, create product offers.

### 3.3. Integrating FastSpring Checkout into Dealverse OS

There are several ways to integrate the FastSpring checkout process into your web application. The most common methods involve using FastSpring's JavaScript libraries or direct API calls.

#### Option A: Using FastSpring's Store Builder Library (SBL)

The Store Builder Library (SBL) is FastSpring's recommended method for integrating the checkout process. It provides a customizable, embeddable checkout experience.

1.  **Include the SBL**: Add the FastSpring SBL script to your web application's frontend:
    ```html
    <script src="https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js"></script>
    ```
2.  **Initialize SBL**: Configure the SBL with your FastSpring store ID.
    ```javascript
    fastspring.configure({
        // Your FastSpring Store ID
        storefront: "your_store_id.fspring.com"
    });
    ```
3.  **Trigger Checkout**: Use SBL to open the checkout popup when a user clicks a purchase button. You can pass product details and customer information.
    ```javascript
    fastspring.popup({
        // Your product path
        path: "your-product-path",
        // Optional: customer details
        // email: "customer@example.com",
        // ...
    });
    ```

#### Option B: Direct API Integration (Advanced)

For more control, you can use direct API calls to create orders and manage subscriptions. This typically involves a backend component in your 'dealverse os' application.

1.  **Authentication**: All API requests must be authenticated using your FastSpring API credentials, encoded in Base64 [1].
2.  **Create Orders**: Use the FastSpring API to create orders for your subscription products. This will involve `POST` requests to the appropriate endpoints.
3.  **Handle Responses**: Process the JSON responses from FastSpring, which will include order details and checkout URLs.

### 3.4. Handling FastSpring Webhooks

Webhooks are critical for maintaining the synchronization of subscription statuses between FastSpring and 'dealverse os'.

1.  **Configure Webhooks in FastSpring**: In your FastSpring App, navigate to `Developer Tools > Webhooks`. Add a new webhook endpoint, pointing to a URL in your 'dealverse os' application that can receive and process webhook notifications.
2.  **Implement Webhook Endpoint in Dealverse OS**: Create an API endpoint in your web application (e.g., `/fastspring-webhook`) that can receive `POST` requests from FastSpring. This endpoint should:
    *   **Verify Signature**: FastSpring signs its webhook requests. You **MUST** verify the signature to ensure the request originated from FastSpring and has not been tampered with.
    *   **Process Events**: Parse the JSON payload of the webhook. The `type` field in the payload indicates the event (e.g., `order.completed`, `subscription.activated`, `subscription.deactivated`).
    *   **Update Database**: Based on the event type, update the corresponding user's subscription status in your 'dealverse os' database.
    *   **Acknowledge Receipt**: Return a `200 OK` HTTP status code to FastSpring to acknowledge successful receipt of the webhook.

    ```json
    // Example webhook payload for a completed order
    {
        "id": "order_id",
        "type": "order.completed",
        "data": {
            // Order details, including subscription information
        }
    }
    ```

### 3.5. Managing Subscriptions Programmatically

Beyond initial purchase, you may need to manage subscriptions (e.g., upgrade, downgrade, cancel) directly from 'dealverse os'.

1.  **Retrieve Subscriptions**: Use the FastSpring API to retrieve details of a user's subscription. This can be done via `GET` requests to the `/subscriptions` endpoint.
2.  **Update Subscriptions**: Implement functionality to allow users to upgrade, downgrade, or change their subscription. This will involve `POST` or `PUT` requests to the `/subscriptions` endpoint with the relevant changes.
3.  **Cancel Subscriptions**: Provide an option for users to cancel their subscriptions. This will typically involve a `DELETE` request to the `/subscriptions` endpoint.

## 4. AI Coding Agent Prompts

Here are prompts you can provide to your AI coding agent to assist with the implementation:

### Prompt 1: FastSpring SBL Integration (Frontend)

```
As an AI coding agent, generate the necessary HTML and JavaScript code to integrate FastSpring's Store Builder Library (SBL) into a web application. The code should:

1.  Include the FastSpring SBL script from `https://d1f8f0ekxec3v3.cloudfront.net/sbl/0.9.2/fastspring.min.js`.
2.  Initialize the SBL with a placeholder for the FastSpring Store ID (e.g., `your_store_id.fspring.com`).
3.  Provide a basic HTML button that, when clicked, triggers the FastSpring checkout popup for a specified product path (e.g., `your-product-path`).
4.  Include comments explaining each part of the code.
```

### Prompt 2: FastSpring Webhook Endpoint (Backend - Python/Flask Example)

```
As an AI coding agent, generate a Python Flask application snippet that implements a FastSpring webhook endpoint. The endpoint should:

1.  Be accessible via a POST request to `/fastspring-webhook`.
2.  Receive JSON payloads from FastSpring.
3.  Include a placeholder for webhook signature verification (e.g., using a secret key).
4.  Parse the incoming JSON payload and print the 'type' of the event (e.g., 'order.completed', 'subscription.activated').
5.  Return a 200 OK status code to FastSpring.
6.  Include comments explaining each part of the code.
```

### Prompt 3: FastSpring API Authentication (Backend - Python Example)

```
As an AI coding agent, generate a Python function that demonstrates how to authenticate requests to the FastSpring API using Base64 encoding for the API username and password. The function should:

1.  Accept `api_username` and `api_password` as parameters.
2.  Construct the `Authorization` header in the format `Basic <Base64-encoded credentials>`.
3.  Return a dictionary containing the `Authorization` header.
4.  Include comments explaining the authentication process.
```

### Prompt 4: Retrieve FastSpring Subscriptions (Backend - Python Example)

```
As an AI coding agent, generate a Python function that uses the FastSpring API to retrieve a list of subscriptions. The function should:

1.  Accept `api_username`, `api_password`, and an optional `customer_email` as parameters.
2.  Use the authentication function from Prompt 3.
3.  Make a GET request to the FastSpring API's `/subscriptions` endpoint (e.g., `https://api.fastspring.com/subscriptions`).
4.  Include the `Authorization` header and a `User-Agent` header.
5.  Optionally include `customer_email` as a query parameter to filter subscriptions.
6.  Print the JSON response.
7.  Include comments explaining the process.
```

## 5. References

[1] FastSpring Developer Docs. (n.d.). *API Overview*. Retrieved from [https://developer.fastspring.com/reference/getting-started-with-your-api](https://developer.fastspring.com/reference/getting-started-with-your-api)
[2] FastSpring Developer Docs. (n.d.). *Accounts*. Retrieved from [https://developer.fastspring.com/reference/accounts](https://developer.fastspring.com/reference/accounts)
[3] FastSpring Developer Docs. (n.d.). *Events*. Retrieved from [https://developer.fastspring.com/reference/events](https://developer.fastspring.com/reference/events)